int min(int x, int y);
int max(int x, int y);

int median_of_three(int array[], int low, int high) {
  int mid = (low + high) / 2;
  int x = array[low];
  int y = array[mid];
  int z = array[high];

  int smallest = min(min(x, y), z);
  int largest = max(max(x, y), z);
  int median = x + y + z - smallest - largest;
  // max(min(x, y), min(max(x, y), z));

  // printf("Sorting  %d: %d, %d: %d and %d: %d to %d, %d and %d\n", low, x,
  // mid,
  //        y, high, z, smallest, median, largest);

  array[low] = smallest;
  array[high] = median;
  array[mid] = largest;

  return median;
}