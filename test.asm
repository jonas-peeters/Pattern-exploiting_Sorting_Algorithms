; ----------------------------------------------------------------------------------------
; This is an OSX console program that writes a little triangle of asterisks to standard
; output. Runs on macOS only.
;
;     nasm -felf64 test.asm && ld test.o -o test && ./test
; ----------------------------------------------------------------------------------------
global    _start
section   .text
_start:
        mov     r11, 0                  ; counter for 1
        mov     rcx, 0                  ; counter for 0
        mov     r8, 0                   ; outer loop i
        mov     r9, 0                   ; array loop i
loop1:  
        rdrand  r12
        inc     r9
        and     r9, 0b01111
        mov     rax, 1
        and     r12, 0b01
        cmp     rax, r12
        je      path2
path1:  inc     r11
        jmp     loop2
path2:  inc     rcx
        jmp     loop2
loop2:  inc     r8
        cmp     r8, 1000000
        jl      loop1
        
done:
        mov     rbx, rax
        mov	eax, 1
        int	0x80