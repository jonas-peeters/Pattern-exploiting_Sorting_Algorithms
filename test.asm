; ----------------------------------------------------------------------------------------
; This is an OSX console program that writes a little triangle of asterisks to standard
; output. Runs on macOS only.
;
;     nasm -f elf64 test.asm && gcc test.o -o test && ./test
; ----------------------------------------------------------------------------------------
default rel
global    _start
section   .text
_start:
        mov     r11, 0                  ; counter for 1
        mov     rcx, 0                  ; counter for 0
        mov     r8, 0                   ; outer loop i
        mov     r9, 0                   ; array loop i
        mov     r10, numbers
loop1:     
        ;mov     rsi, [r10+r9*4]
        
        mov     rax, 1
        sub     rax, [r10+r9*4]
        mov     rdx, 9
        mul     rdx

        inc     r9
        and     r9, 0b01111

        jmp     rax
        ;je      path2
path1:  inc     r11
        jmp     loop2
path2:  inc     rcx
loop2:  inc     r8
        cmp     r8, 160
        jl      loop1
        
done:
        mov     rbx, rax
        mov	eax, 1
        int	0x80


section   .data
numbers      dd     1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0
byteoffset   dd     7